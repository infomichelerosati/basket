<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Dunk Shot Master</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0b0e14">
    <link rel="apple-touch-icon" href="assets/icon-192.png">

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Fonts (Optional, preconnect) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
</head>

<body>

    <!-- UI Layer -->
    <div id="ui-layer">
        <div class="score-container">
            <div id="score" class="score-text">0</div>
            <div id="lives" class="lives-text">‚ù§ x3</div>
            <div id="status-container" class="status-container"></div>
            <div id="best" class="best-text">Record: 0</div>
        </div>
        <button id="pause-btn" class="icon-btn">‚è∏Ô∏è</button>
        <div id="pause-overlay" class="fullscreen-overlay hidden">
            <div class="overlay-title">PAUSA</div>
            <button id="resume-btn" class="overlay-btn">RIPRENDI</button>
            <button id="quit-btn" class="overlay-btn secondary-btn" style="margin-top: 15px;">ESCI</button>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="start-screen" class="fullscreen-overlay active">
        <div class="overlay-title">DUNK SHOT<br>MASTER</div>
        <button id="start-btn" class="overlay-btn">GIOCA</button>
        <button id="open-leaderboard-btn" class="overlay-btn secondary-btn"
            style="margin-top: 15px; font-size: 16px;">CLASSIFICA üèÜ</button>
        <button id="install-btn" class="install-btn">INSTALLA APP</button>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over-screen" class="fullscreen-overlay">
        <div class="overlay-title" style="font-size: 42px;">GAME OVER</div>
        <div class="overlay-score">PUNTI: <span id="final-score">0</span></div>

        <!-- Save Score UI -->
        <div id="save-score-container" class="save-score-box hidden">
            <input type="text" id="player-name-input" placeholder="Il tuo nome" maxlength="15">
            <button id="save-score-btn" class="small-btn">SALVA</button>
        </div>

        <button id="restart-btn" class="overlay-btn" style="margin-top: 20px;">RITENTA</button>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboard-screen" class="fullscreen-overlay hidden">
        <div class="overlay-title" style="font-size: 36px;">CLASSIFICA</div>
        <div id="leaderboard-list" class="leaderboard-list">
            <!-- Items injected by JS -->
        </div>
        <button id="close-leaderboard-btn" class="overlay-btn" style="margin-top: 20px;">INDIETRO</button>
    </div>

    <!-- Game Canvas -->
    <canvas id="gameCanvas"></canvas>

    <!-- Scripts -->
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/audio.js"></script>
    <script src="js/leaderboard.js"></script> <!-- Load before game to expose initLeaderboardSave -->
    <script src="js/game.js"></script>
    <script src="js/pwa-handler.js"></script>

</body>

</html>